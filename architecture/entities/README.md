# 엔티티 및 밸류 객체 설계
> 커피 프린스 객체지향 설계를 위한 엔티티와 값 객체를 추출합니다.
> 설계에 앞서 엔티티와 값객체의 구분을 명확히 하기 위해 [엔티티와 값 객체](https://jaeyeolshin.github.io/2016-02-06/difference-between-entity-and-value-object/) 비교 문서를 참고하여 아래와 같이 정리했습니다

## 엔티티 vs. 값-객체
### 엔티티란?
* 해당 도메인 내에서 id 로 구분할 필요가 있으며, 다양한 변경 가능한 속성들로 정의되어지는 대상
* 아래의 "주문"과 "결제"의 경우 주문ID, 결제ID 와 같이 명시적으로 구분되어 관리되어야 하기 때문에 엔티티라고 판단됩니다
### 값객체란?
* 해당 도메인 내에서 굳이 id로 구분할 필요가 없고, 속성이 동일한 경우 같은 대상으로 간주되는 대상
* "구매"의 경우는 음료와 교환할 수 있는 쿠폰정도로 볼 수 있으며 속성이 같다면 항상 동일한 역할을 하기 때문에 id 구분이 필요 없다고 볼 수 있다

## 엔티티
### 가게
* 지점 이름
### 주문
* 주문의 시간
* 주문의 상태
* 커피의 종류
  * 에스프레소, 마키아또, 카페 라떼, 바닐라 라떼, 카푸치노 중 선택
* 커피의 크기
  * 에스프레소, 톨, 그란데
  * 커피의 종류에 따라 크기에 대한 제약이 있을 수 있습니다
* 시럽의 종류
  * 카라멜, 바닐라
  * 시럽은 넣지 않을 수도 있습니다
### 결제
* 결제의 종류
  * 직접결제 혹은 신용카드 결제
  * 신용카드를 통한 직접 결제의 경우 즉시 카드로 결제를 수행할 수 있습니다
  * 앱 혹은 인터넷을 통해 결제가 이루어진 경우 음료 바코드를 직접 받을 수 있습니다
* 결제 금액

## 값 객체
### 구매
* 구매 상태
  * 결제가 정상적으로 이루어진 경우 음료 교환 바코드가 출력된 영수증이 출력됩니다
  * 비정상 결제의 경우 오류메시지와 함께 영수증이 출력됩니다
* 구매 상품
  * 음료와 교환할 수 있는 바코드 혹은 QR 코드
* 주문 내역
  * 주문된 내역 전체

## 고찰
> 일반적인 웹 서비스 혹은 모바일 앱을 통한 설계와 오프라인 매장과는 다른점이 있는데 이는 클라이언트와 서버의 트랜잭션의 분리 여부입니다
* 오프라인 매장 혹은 벤딩 머신의 경우 엔티티의 상태를 변경하는 주체가 동일하여 Validation 이나, 멀티 트랜잭션에 대한 고민이 거의 없어 단순하다
* 인터넷 서비스 혹은 모바일 앱을 통한 서비스의 경우 서버의 상태가 언제든지 바뀔 수 있고, 클라이언트의 캐시 혹은 로컬 정보도 바뀔 수 있어 복잡하다
